<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 550">
  <defs>
    <linearGradient id="routerGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="registryGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6D28D9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="factoryGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1D4ED8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="agentGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4F46E5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="mcpActiveGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F59E0B;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D97706;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="feedbackGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#EC4899;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#DB2777;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow2" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="4" stdDeviation="4" flood-opacity="0.25"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748B"/>
    </marker>
    <marker id="arrowheadGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#10B981"/>
    </marker>
    <marker id="arrowheadPink" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#EC4899"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="950" height="550" fill="#0F172A"/>
  
  <!-- Title -->
  <text x="475" y="35" font-family="system-ui, -apple-system, sans-serif" font-size="22" font-weight="bold" fill="#F8FAFC" text-anchor="middle">JIT-MCP: Just-in-Time Tool Loading</text>
  <text x="475" y="58" font-family="system-ui, -apple-system, sans-serif" font-size="14" fill="#94A3B8" text-anchor="middle">Route → Select → Load only what's needed</text>
  
  <!-- User Query -->
  <g filter="url(#shadow2)">
    <rect x="50" y="100" width="160" height="70" rx="10" fill="#1E293B" stroke="#334155" stroke-width="2"/>
    <text x="130" y="130" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#F8FAFC" text-anchor="middle">User Query</text>
    <text x="130" y="152" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#94A3B8" text-anchor="middle">"Send Q4 report to sales"</text>
  </g>
  
  <!-- Arrow: User -> Router -->
  <line x1="210" y1="135" x2="275" y2="135" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="242" y="125" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748B" text-anchor="middle">①</text>
  
  <!-- MCP Router -->
  <g filter="url(#shadow2)">
    <rect x="285" y="90" width="180" height="90" rx="12" fill="url(#routerGrad)"/>
    <text x="375" y="120" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">MCP Router</text>
    <text x="375" y="142" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#D1FAE5" text-anchor="middle">1 tool: search_mcps()</text>
    <text x="375" y="162" font-family="monospace" font-size="10" fill="#A7F3D0" text-anchor="middle">~2K tokens</text>
  </g>
  
  <!-- Arrow: Router -> Registry -->
  <line x1="375" y1="180" x2="375" y2="218" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="365" y="200" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748B" text-anchor="middle">②</text>
  
  <!-- MCP Registry -->
  <g filter="url(#shadow2)">
    <rect x="285" y="225" width="180" height="100" rx="12" fill="url(#registryGrad)"/>
    <text x="375" y="255" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">MCP Registry</text>
    <text x="375" y="277" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#E9D5FF" text-anchor="middle">VectorDB with MCPs</text>
    <text x="375" y="297" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#DDD6FE" text-anchor="middle">+ synthetic queries</text>
    <text x="375" y="314" font-family="monospace" font-size="9" fill="#C4B5FD" text-anchor="middle">Returns: [salesforce, email]</text>
  </g>
  
  <!-- Arrow: Registry -> Factory -->
  <line x1="465" y1="275" x2="525" y2="275" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="495" y="265" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748B" text-anchor="middle">③</text>
  
  <!-- Agent Factory -->
  <g filter="url(#shadow2)">
    <rect x="535" y="230" width="170" height="90" rx="12" fill="url(#factoryGrad)"/>
    <text x="620" y="260" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Agent Factory</text>
    <text x="620" y="282" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#BFDBFE" text-anchor="middle">Dynamic initialization</text>
    <text x="620" y="302" font-family="monospace" font-size="10" fill="#93C5FD" text-anchor="middle">Only selected MCPs</text>
  </g>
  
  <!-- Arrow: Factory -> Main Agent -->
  <line x1="620" y1="320" x2="620" y2="365" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="610" y="345" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748B" text-anchor="middle">④</text>
  
  <!-- Main Agent -->
  <g filter="url(#shadow2)">
    <rect x="520" y="375" width="200" height="95" rx="12" fill="url(#agentGrad2)"/>
    <text x="620" y="405" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Main Agent</text>
    <text x="620" y="427" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#E0E7FF" text-anchor="middle">8 tools (not 50!)</text>
    <text x="620" y="447" font-family="monospace" font-size="10" fill="#C7D2FE" text-anchor="middle">~5K tokens total</text>
    <text x="620" y="462" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#A5B4FC" text-anchor="middle">75% context saved</text>
  </g>
  
  <!-- Selected MCPs -->
  <g filter="url(#shadow2)">
    <rect x="760" y="350" width="140" height="50" rx="8" fill="url(#mcpActiveGrad)"/>
    <text x="830" y="372" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Salesforce MCP</text>
    <text x="830" y="389" font-family="monospace" font-size="9" fill="#FEF3C7" text-anchor="middle">5 tools loaded</text>
  </g>
  <line x1="720" y1="400" x2="760" y2="375" stroke="#F59E0B" stroke-width="2"/>
  
  <g filter="url(#shadow2)">
    <rect x="760" y="415" width="140" height="50" rx="8" fill="url(#mcpActiveGrad)"/>
    <text x="830" y="437" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Email MCP</text>
    <text x="830" y="454" font-family="monospace" font-size="9" fill="#FEF3C7" text-anchor="middle">3 tools loaded</text>
  </g>
  <line x1="720" y1="440" x2="760" y2="440" stroke="#F59E0B" stroke-width="2"/>
  
  <!-- Feedback Handler -->
  <g filter="url(#shadow2)">
    <rect x="50" y="380" width="170" height="80" rx="12" fill="url(#feedbackGrad)"/>
    <text x="135" y="410" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="bold" fill="white" text-anchor="middle">Feedback Handler</text>
    <text x="135" y="432" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#FBCFE8" text-anchor="middle">Catches missing capability</text>
    <text x="135" y="450" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#F9A8D4" text-anchor="middle">Re-routes with context</text>
  </g>
  
  <!-- Feedback loop arrow -->
  <path d="M 520 450 Q 350 500 220 460" stroke="#EC4899" stroke-width="2" fill="none" stroke-dasharray="6,3" marker-end="url(#arrowheadPink)"/>
  <text x="370" y="495" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#EC4899" text-anchor="middle">⑤ if missing capability</text>
  
  <!-- Re-route arrow -->
  <path d="M 135 380 Q 135 300 285 150" stroke="#EC4899" stroke-width="2" fill="none" stroke-dasharray="6,3" marker-end="url(#arrowheadPink)"/>
  <text x="180" y="280" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#EC4899" text-anchor="middle">⑥ re-route</text>
  
  <!-- Success output -->
  <g>
    <rect x="760" y="490" width="140" height="40" rx="6" fill="#166534" stroke="#22C55E" stroke-width="1"/>
    <text x="830" y="515" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#86EFAC" text-anchor="middle">✓ Task Complete</text>
  </g>
  <line x1="620" y1="470" x2="760" y2="510" stroke="#22C55E" stroke-width="2" marker-end="url(#arrowheadGreen)"/>
  
  <!-- Stats comparison -->
  <g transform="translate(50, 200)">
    <rect x="0" y="0" width="180" height="130" rx="8" fill="#1E293B" stroke="#334155" stroke-width="1"/>
    <text x="90" y="25" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="#F8FAFC" text-anchor="middle">Comparison</text>
    
    <text x="15" y="50" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#EF4444">Without JIT-MCP:</text>
    <text x="15" y="68" font-family="monospace" font-size="9" fill="#94A3B8">• 50 tools loaded</text>
    <text x="15" y="82" font-family="monospace" font-size="9" fill="#94A3B8">• 20K tokens in prompt</text>
    
    <text x="15" y="102" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#22C55E">With JIT-MCP:</text>
    <text x="15" y="120" font-family="monospace" font-size="9" fill="#94A3B8">• 8 tools loaded</text>
    <text x="15" y="134" font-family="monospace" font-size="9" fill="#94A3B8">• 5K tokens in prompt</text>
  </g>
</svg>

